<div align="center">

# ğŸ  PinHouse

**ê³µê³µ ì„ëŒ€ì£¼íƒ ì •ë³´ ë° ì²­ì•½ ì§„ë‹¨ í”Œë«í¼**

[![Java](https://img.shields.io/badge/Java-21-ED8B00?style=flat&logo=openjdk&logoColor=white)](https://openjdk.org/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4.3-6DB33F?style=flat&logo=spring-boot)](https://spring.io/projects/spring-boot)
[![Gradle](https://img.shields.io/badge/Gradle-8.x-02303A?style=flat&logo=gradle)](https://gradle.org/)
[![MongoDB](https://img.shields.io/badge/MongoDB-47A248?style=flat&logo=mongodb&logoColor=white)](https://www.mongodb.com/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-4479A1?style=flat&logo=mysql&logoColor=white)](https://www.mysql.com/)
[![Redis](https://img.shields.io/badge/Redis-7.2.5-DC382D?style=flat&logo=redis&logoColor=white)](https://redis.io/)

[ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ) â€¢ [ì•„í‚¤í…ì²˜](#-ì•„í‚¤í…ì²˜) â€¢ [ì£¼ìš” êµ¬í˜„ ì‚¬í•­](#-ì£¼ìš”-êµ¬í˜„-ì‚¬í•­)

</div>

---

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ì•„í‚¤í…ì²˜](#-ì•„í‚¤í…ì²˜)
- [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ì£¼ìš” êµ¬í˜„ ì‚¬í•­](#-ì£¼ìš”-êµ¬í˜„-ì‚¬í•­)
- [ì„±ëŠ¥ ìµœì í™”](#-ì„±ëŠ¥-ìµœì í™”)
- [ë³´ì•ˆ](#-ë³´ì•ˆ)
- [CI/CD](#-cicd)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ì†Œê°œ

**PinHouse**ëŠ” ê³µê³µ ì„ëŒ€ì£¼íƒ ì •ë³´ë¥¼ ì œê³µí•˜ê³  ì‚¬ìš©ìì˜ ì²­ì•½ ìê²©ì„ ì§„ë‹¨í•˜ëŠ” í”Œë«í¼ì…ë‹ˆë‹¤.
ë³µì¡í•œ ì²­ì•½ ì •ë³´ë¥¼ ì§ê´€ì ìœ¼ë¡œ ì œê³µí•˜ë©°, ìœ„ì¹˜ ê¸°ë°˜ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ì‚¬ìš©ì ë§ì¶¤í˜• ì£¼íƒ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### ğŸŒŸ í•µì‹¬ ê°€ì¹˜

- **ì •ë³´ íˆ¬ëª…ì„±**: ê³µê³µ ì„ëŒ€ì£¼íƒ ë°ì´í„°ë¥¼ í†µí•©í•˜ì—¬ íˆ¬ëª…í•˜ê²Œ ì œê³µ
- **ë§ì¶¤í˜• ì§„ë‹¨**: ì‚¬ìš©ì ìƒí™©ì— ë§ëŠ” ì²­ì•½ ìê²© ìë™ ì§„ë‹¨
- **ìœ„ì¹˜ ê¸°ë°˜ ì¶”ì²œ**: ì§ì¥/í•™êµ ë“± ê´€ì‹¬ ìœ„ì¹˜ ê¸°ë°˜ ìµœì  ì£¼íƒ ì¶”ì²œ
- **ì‚¬ìš©ì ê²½í—˜**: ë³µì¡í•œ ì •ë³´ë¥¼ ì§ê´€ì ì´ê³  í¸ë¦¬í•˜ê²Œ ì œê³µ

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ” ì¸ì¦ ë° ì‚¬ìš©ì ê´€ë¦¬
- **ì†Œì…œ ë¡œê·¸ì¸**: Kakao, Naver OAuth2 ì¸ì¦
- **JWT ê¸°ë°˜ ì¸ì¦**: Access/Refresh Tokenì„ í†µí•œ ë³´ì•ˆ ê°•í™”
- **ë§ˆì´í˜ì´ì§€**: í”„ë¡œí•„ ê´€ë¦¬, ì¢‹ì•„ìš” ëª©ë¡, ì§„ë‹¨ ì´ë ¥ ì¡°íšŒ

### ğŸ˜ï¸ ì£¼íƒ ì •ë³´ ê´€ë¦¬
- **ë‹¨ì§€ ì •ë³´**: ì„ëŒ€ì£¼íƒ ë‹¨ì§€ì˜ ìƒì„¸ ì •ë³´ ì œê³µ
  - ë‚œë°©ë°©ì‹, ì´ì„¸ëŒ€ìˆ˜, ê³µê¸‰í˜¸ìˆ˜
  - ë°© íƒ€ì…ë³„ ì •ë³´ (ë©´ì , ì„ëŒ€ë£Œ, ê´€ë¦¬ë¹„)
  - ì£¼ë³€ ì¸í”„ë¼ ì •ë³´ (ì¹´í˜, í¸ì˜ì , ë³‘ì›, í•™êµ ë“±)

- **ê³µê³  ê²€ìƒ‰**: ë‹¤ì–‘í•œ í•„í„°ë§ ë° ì •ë ¬ ì˜µì…˜
  - ì§€ì—­, ê³µê¸‰ ìœ í˜•, ê°€ê²© ë²”ìœ„, ë©´ì ë³„ ê²€ìƒ‰
  - ì»¤ì„œ ê¸°ë°˜ ë¬´í•œ ìŠ¤í¬ë¡¤ í˜ì´ì§€ë„¤ì´ì…˜
  - ì¸ê¸°ìˆœ, ìµœì‹ ìˆœ ì •ë ¬

- **ë°© ë¹„êµ ê¸°ëŠ¥**: ì—¬ëŸ¬ ë°© íƒ€ì…ì„ í•œëˆˆì— ë¹„êµ

### ğŸ“ ìœ„ì¹˜ ê¸°ë°˜ ì„œë¹„ìŠ¤
- **í•€í¬ì¸íŠ¸**: ì‚¬ìš©ìì˜ ê´€ì‹¬ ìœ„ì¹˜ ë“±ë¡ (ì§ì¥, í•™êµ, ë¶€ëª¨ ì§‘ ë“±)
- **ê±°ë¦¬ ì‹œë®¬ë ˆì´í„°**: Odsay APIë¥¼ í™œìš©í•œ ëŒ€ì¤‘êµí†µ ê²½ë¡œ ê³„ì‚°
  - ì´ ì†Œìš” ì‹œê°„, ê±°ë¦¬, ìš”ê¸ˆ ì •ë³´
  - êµ¬ê°„ë³„ ìƒì„¸ ê²½ë¡œ (ìŠ¹ì°¨/í•˜ì°¨ ì •ë³´, ë…¸ì„  ìƒ‰ìƒ)
  - ìµœëŒ€ 3ê°œ ê²½ë¡œ ì œê³µ

### ğŸ“ ì²­ì•½ ì§„ë‹¨ ì‹œìŠ¤í…œ
- **ìê²© ì§„ë‹¨**: ì‚¬ìš©ìì˜ ì†Œë“, ìì‚°, ê°€ì¡± êµ¬ì„±ì› ì •ë³´ ê¸°ë°˜ ì²­ì•½ ê°€ëŠ¥ ì—¬ë¶€ íŒë‹¨
- **ê·œì¹™ ì—”ì§„**: ê³µê¸‰ ìœ í˜•ë³„ ë³µì¡í•œ ì²­ì•½ ìê²© ê·œì¹™ ìë™ ì ìš©
  - ì‹ í˜¼ë¶€ë¶€ íŠ¹ë³„ê³µê¸‰
  - ë‹¤ìë…€ ê°€êµ¬ íŠ¹ë³„ê³µê¸‰
  - ìƒì• ìµœì´ˆ íŠ¹ë³„ê³µê¸‰
  - ì²­ë…„ íŠ¹ë³„ê³µê¸‰
- **ì§„ë‹¨ ì´ë ¥ ê´€ë¦¬**: ê³¼ê±° ì§„ë‹¨ ê²°ê³¼ ì €ì¥ ë° ì¡°íšŒ

### ğŸ” ê²€ìƒ‰ ë° í•„í„°ë§
- **ë¹ ë¥¸ ê²€ìƒ‰**: ì§€ì—­, ë°© íƒ€ì…, ì„ëŒ€ë£Œ ë²”ìœ„ë¡œ ê°„í¸ ê²€ìƒ‰
- **ê³ ê¸‰ ê²€ìƒ‰**: í‚¤ì›Œë“œ ê¸°ë°˜ ê²€ìƒ‰ ë° ë‹¤ì–‘í•œ í•„í„° ì¡°í•©
- **ì¸ê¸° ê²€ìƒ‰ì–´**: ì‹¤ì‹œê°„ ì¸ê¸° ê²€ìƒ‰ì–´ ì œê³µ
- **ê²€ìƒ‰ ê¸°ë¡**: MongoDB ê¸°ë°˜ ì‚¬ìš©ìë³„ ê²€ìƒ‰ ì´ë ¥ ì¶”ì 

### â¤ï¸ ì¢‹ì•„ìš” ë° ë¶ë§ˆí¬
- ê³µê³ , ë‹¨ì§€, ë°© íƒ€ì…ì— ëŒ€í•œ ì¢‹ì•„ìš” ê¸°ëŠ¥
- ë¡œê·¸ì¸ ì‚¬ìš©ìë³„ ì¢‹ì•„ìš” ëª©ë¡ ê´€ë¦¬

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Language**: Java 21
- **Framework**: Spring Boot 3.4.3
- **Build Tool**: Gradle 8.x
- **Architecture**: Clean Architecture (4-Layer)

### Database
- **MySQL 8.0**: ê´€ê³„í˜• ë°ì´í„° (ì‚¬ìš©ì, ê³µê³ , ë‹¨ì§€, ì§„ë‹¨ ê²°ê³¼)
- **MongoDB**: ë¬¸ì„œ ê¸°ë°˜ ë°ì´í„° (í•€í¬ì¸íŠ¸, ê²€ìƒ‰ ì´ë ¥, ì£¼ë³€ì‹œì„¤)
- **Redis 7.2.5**: ì„¸ì…˜ ê´€ë¦¬ (JWT Refresh Token, ì„ì‹œ ì‚¬ìš©ì ì •ë³´)

### Security & Auth
- **Spring Security**: ë³´ì•ˆ í”„ë ˆì„ì›Œí¬
- **OAuth2 Client**: ì†Œì…œ ë¡œê·¸ì¸ (Kakao, Naver)
- **JWT**: `io.jsonwebtoken:jjwt-api:0.11.5`

### Infrastructure
- **Docker & Docker Compose**: ì»¨í…Œì´ë„ˆí™”
- **Nginx**: ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ
- **Certbot**: SSL/TLS ì¸ì¦ì„œ ê´€ë¦¬

### DevOps
- **GitHub Actions**: CI/CD ìë™í™”
- **JUnit 5**: ë‹¨ìœ„ ë° í†µí•© í…ŒìŠ¤íŠ¸

### External APIs
- **Odsay API**: ëŒ€ì¤‘êµí†µ ê²½ë¡œ ë° ì‹œê°„ ê³„ì‚°
- **Kakao Local API**: ì£¼ì†Œ-ì¢Œí‘œ ë³€í™˜
- **OAuth2 Providers**: Kakao, Naver

### Documentation & Monitoring
- **Swagger/OpenAPI**: `springdoc-openapi-starter-webmvc-ui:2.8.6`
- **Spring Actuator**: ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë‹ˆí„°ë§

---

## ğŸ— ì•„í‚¤í…ì²˜

### ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "Client Layer"
        Client[Client Application]
    end

    subgraph "API Gateway"
        Nginx[Nginx Reverse Proxy]
    end

    subgraph "Application Server"
        Spring[Spring Boot 3.4.3]

        subgraph "Clean Architecture Layers"
            Presentation[Presentation Layer<br/>REST Controllers]
            Application[Application Layer<br/>UseCase + Services]
            Domain[Domain Layer<br/>Entities + Repositories]
            Infrastructure[Infrastructure Layer<br/>DB + External APIs]
        end
    end

    subgraph "Data Layer"
        MySQL[(MySQL 8.0<br/>Relational Data)]
        MongoDB[(MongoDB<br/>Document Data)]
        Redis[(Redis 7.2.5<br/>Cache & Session)]
    end

    subgraph "External Services"
        Odsay[Odsay API]
        KakaoLocal[Kakao Local API]
        OAuth2[OAuth2 Providers<br/>Kakao, Naver]
    end

    Client -->|HTTPS| Nginx
    Nginx -->|HTTP| Spring
    Spring --> Presentation
    Presentation --> Application
    Application --> Domain
    Domain --> Infrastructure
    Infrastructure --> MySQL
    Infrastructure --> MongoDB
    Infrastructure --> Redis
    Infrastructure --> Odsay
    Infrastructure --> KakaoLocal
    Infrastructure --> OAuth2

    style Spring fill:#6DB33F
    style MySQL fill:#4479A1
    style MongoDB fill:#47A248
    style Redis fill:#DC382D
```

### Clean Architecture (4-Layer)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Presentation Layer                     â”‚
â”‚              (REST API Controllers - *Api.java)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ depends on
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Application Layer                       â”‚
â”‚        UseCase Interfaces + Service Implementations      â”‚
â”‚                   (Business Logic)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ depends on
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Domain Layer                          â”‚
â”‚            Entities + Repository Interfaces              â”‚
â”‚                 (Business Rules)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ depends on
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Infrastructure Layer                       â”‚
â”‚      Repository Implementations + External APIs          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë„ë©”ì¸ ëª¨ë“ˆ êµ¬ì¡°

ê° ë„ë©”ì¸ì€ ì¼ê´€ëœ íŒ¨í‚¤ì§€ êµ¬ì¡°ë¥¼ ë”°ë¦…ë‹ˆë‹¤:

```
<domain>/
â”œâ”€â”€ presentation/           # REST API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ *Api.java          # Controller
â”‚   â””â”€â”€ swagger/           # API ëª…ì„¸
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ usecase/           # UseCase ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ service/           # UseCase êµ¬í˜„
â”‚   â””â”€â”€ dto/               # Request/Response DTO
â”‚       â”œâ”€â”€ request/
â”‚       â””â”€â”€ response/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entity/            # JPA/MongoDB Entity
â”‚   â””â”€â”€ repository/        # Repository Interface
â””â”€â”€ external/              # ì™¸ë¶€ API í†µí•© (ì„ íƒ)
```

### ë°ì´í„°ë² ì´ìŠ¤ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MySQL     â”‚     â”‚   MongoDB    â”‚     â”‚    Redis     â”‚
â”‚              â”‚     â”‚              â”‚     â”‚              â”‚
â”‚  - User      â”‚     â”‚ - PinPoint   â”‚     â”‚ - JWT Token  â”‚
â”‚  - Complex   â”‚     â”‚ - Search     â”‚     â”‚ - TempUser   â”‚
â”‚  - Notice    â”‚     â”‚   History    â”‚     â”‚              â”‚
â”‚  - Diagnosis â”‚     â”‚ - Facility   â”‚     â”‚              â”‚
â”‚  - Like      â”‚     â”‚              â”‚     â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### Entity Relationship Diagram

```mermaid
erDiagram
    USER ||--o{ DIAGNOSIS : has
    USER ||--o{ LIKE : creates
    USER ||--o{ PINPOINT : owns
    USER ||--o{ SEARCH_HISTORY : performs

    NOTICE ||--o{ NOTICE_COMPLEX : contains
    COMPLEX ||--o{ NOTICE_COMPLEX : included_in
    COMPLEX ||--o{ UNIT_TYPE : has
    COMPLEX ||--o{ FACILITY : near

    LIKE }o--|| NOTICE : targets
    LIKE }o--|| COMPLEX : targets
    LIKE }o--|| UNIT_TYPE : targets

    USER {
        uuid id PK
        string name
        string profile_image_url
        string oauth_provider
        string oauth_id
        datetime created_at
        datetime updated_at
    }

    NOTICE {
        string id PK
        string title
        date recruit_start_date
        date recruit_end_date
        string region
        string supply_type
    }

    COMPLEX {
        string id PK
        string name
        string address
        string heating
        int total_households
    }

    UNIT_TYPE {
        string id PK
        string complex_id FK
        string type_code
        int area
        int rent
        int deposit
    }

    DIAGNOSIS {
        uuid id PK
        uuid user_id FK
        json diagnosis_result
        datetime created_at
    }

    LIKE {
        uuid id PK
        uuid user_id FK
        string target_type
        string target_id
    }

    PINPOINT {
        string id PK
        uuid user_id
        string name
        coordinate location
        boolean is_first
    }

    FACILITY {
        string id PK
        string complex_id
        string facility_type
        array facilities
    }

    SEARCH_HISTORY {
        string id PK
        uuid user_id
        string keyword
        json filters
        datetime created_at
    }

    NOTICE_COMPLEX {
        string notice_id FK
        string complex_id FK
    }
```

### MySQL (Relational Data)

**User í…Œì´ë¸”**
- ì‚¬ìš©ì ê¸°ë³¸ ì •ë³´ (ì´ë¦„, í”„ë¡œí•„ ì´ë¯¸ì§€, OAuth ì •ë³´)
- ì§„ë‹¨ ê²°ê³¼ì™€ 1:N ê´€ê³„
- ì¢‹ì•„ìš”ì™€ 1:N ê´€ê³„

**Complex í…Œì´ë¸”**
- ì„ëŒ€ì£¼íƒ ë‹¨ì§€ ì •ë³´
- Noticeì™€ N:M ê´€ê³„ (í•˜ë‚˜ì˜ ê³µê³ ì— ì—¬ëŸ¬ ë‹¨ì§€)
- UnitTypeê³¼ 1:N ê´€ê³„

**Notice í…Œì´ë¸”**
- ì²­ì•½ ê³µê³  ì •ë³´
- ëª¨ì§‘ ê¸°ê°„, ë‹¹ì²¨ì ë°œí‘œì¼, ê³„ì•½ì¼ ë“±

**Diagnosis í…Œì´ë¸”**
- ì²­ì•½ ì§„ë‹¨ ê²°ê³¼ ì €ì¥
- ì‚¬ìš©ì ì†Œë“, ìì‚°, ê°€ì¡± êµ¬ì„±ì› ì •ë³´

**Like í…Œì´ë¸”**
- ì‚¬ìš©ìë³„ ì¢‹ì•„ìš” ì •ë³´
- ê³µê³ , ë‹¨ì§€, ë°© íƒ€ì… êµ¬ë¶„

### MongoDB (Document-based Data)

**PinPoint Collection**
- ì‚¬ìš©ìì˜ ê´€ì‹¬ ìœ„ì¹˜ ì •ë³´
- Kakao Local APIë¥¼ í†µí•œ ì¢Œí‘œ ë°ì´í„°
- ì¦ê²¨ì°¾ê¸°(first) ì—¬ë¶€

**SearchHistory Collection**
- ì‚¬ìš©ìë³„ ê²€ìƒ‰ ê¸°ë¡
- ê²€ìƒ‰ í‚¤ì›Œë“œ, í•„í„° ì¡°ê±´, íƒ€ì„ìŠ¤íƒ¬í”„

**Facility Collection**
- ë‹¨ì§€ ì£¼ë³€ ì‹œì„¤ ì •ë³´
- ì¹´í…Œê³ ë¦¬ë³„ ì‹œì„¤ ëª©ë¡

### Redis (Cache & Session)

- **JWT Refresh Token**: í† í° ê°±ì‹ ìš© ë¦¬í”„ë ˆì‹œ í† í° ì €ì¥
- **TempUserInfo**: OAuth2 ì¸ì¦ í›„ íšŒì›ê°€ì… ì „ ì„ì‹œ ì‚¬ìš©ì ì •ë³´

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/pinHouse/server/
â”‚   â”‚   â”‚   â”œâ”€â”€ core/                      # ê³µí†µ ê´€ì‹¬ì‚¬
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ aop/                   # @CheckLogin AOP
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ config/                # Swagger, DB ì„¤ì •
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ exception/             # ì˜ˆì™¸ ì²˜ë¦¬
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ response/              # í‘œì¤€ ì‘ë‹µ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ util/                  # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ security/                  # ë³´ì•ˆ ë° ì¸ì¦
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                  # OAuth2 ì²˜ë¦¬
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ jwt/                   # JWT í† í°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ oauth2/                # OAuth2 ì„¤ì •
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ config/                # Security ì„¤ì •
â”‚   â”‚   â”‚   â””â”€â”€ platform/                  # ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸
â”‚   â”‚   â”‚       â”œâ”€â”€ user/                  # ì‚¬ìš©ì
â”‚   â”‚   â”‚       â”œâ”€â”€ housing/               # ì£¼íƒ ì •ë³´
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ complex/           # ë‹¨ì§€
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ notice/            # ê³µê³ 
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ facility/          # ì£¼ë³€ì‹œì„¤
â”‚   â”‚   â”‚       â”œâ”€â”€ diagnostic/            # ì²­ì•½ ì§„ë‹¨
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ diagnosis/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ school/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ rule/
â”‚   â”‚   â”‚       â”œâ”€â”€ pinPoint/              # í•€í¬ì¸íŠ¸
â”‚   â”‚   â”‚       â”œâ”€â”€ like/                  # ì¢‹ì•„ìš”
â”‚   â”‚   â”‚       â””â”€â”€ search/                # ê²€ìƒ‰
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ application.yml
â”‚   â”‚       â”œâ”€â”€ application-local.yml
â”‚   â”‚       â””â”€â”€ application-dev.yml
â”‚   â””â”€â”€ test/                              # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”œâ”€â”€ pinhouse_docker/                       # Docker ì„¤ì •
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ build.gradle
â”œâ”€â”€ CLAUDE.md                              # ê°œë°œ ê°€ì´ë“œ
â””â”€â”€ README.md
```

---

## ğŸ”§ ì£¼ìš” êµ¬í˜„ ì‚¬í•­

### OAuth2 ì¸ì¦ íë¦„

```mermaid
sequenceDiagram
    participant Client
    participant Backend
    participant OAuth2 as OAuth2 Provider<br/>(Kakao/Naver)
    participant Redis
    participant MySQL

    Client->>Backend: 1. OAuth2 ë¡œê·¸ì¸ ìš”ì²­
    Backend->>OAuth2: 2. ì¸ì¦ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    OAuth2->>Client: 3. ì‚¬ìš©ì ë™ì˜ í›„ Authorization Code ë°˜í™˜
    Client->>Backend: 4. Authorization Code ì „ë‹¬
    Backend->>OAuth2: 5. Access Token ìš”ì²­
    OAuth2->>Backend: 6. Access Token ë°˜í™˜
    Backend->>OAuth2: 7. ì‚¬ìš©ì ì •ë³´ ìš”ì²­
    OAuth2->>Backend: 8. ì‚¬ìš©ì ì •ë³´ ë°˜í™˜

    alt ì‹ ê·œ ì‚¬ìš©ì
        Backend->>Redis: 9. ì„ì‹œ ì‚¬ìš©ì ì •ë³´ ì €ì¥ (tempUserKey)
        Backend->>Client: 10. tempUserKey ë°˜í™˜
        Client->>Backend: 11. íšŒì›ê°€ì… ìš”ì²­ (tempUserKey + ì¶”ê°€ ì •ë³´)
        Backend->>Redis: 12. ì„ì‹œ ì •ë³´ ì¡°íšŒ
        Backend->>MySQL: 13. ì‚¬ìš©ì ìƒì„±
        Backend->>Client: 14. JWT Token ë°œê¸‰ (Access + Refresh)
    else ê¸°ì¡´ ì‚¬ìš©ì
        Backend->>MySQL: 9. ì‚¬ìš©ì ì¡°íšŒ
        Backend->>Redis: 10. Refresh Token ì €ì¥
        Backend->>Client: 11. JWT Token ë°œê¸‰ (Access + Refresh)
    end
```

### 1. Clean Architecture ì ìš©

**ì˜ì¡´ì„± ì—­ì „ ì›ì¹™ (DIP) ì¤€ìˆ˜**
```java
// UseCase Interface (Application Layer)
public interface ComplexUseCase {
    ComplexDetailResponse getComplex(String id, String pinPointId);
}

// Service Implementation
@Service
@RequiredArgsConstructor
public class ComplexService implements ComplexUseCase {
    @Override
    public ComplexDetailResponse getComplex(String id, String pinPointId) {
        // êµ¬í˜„
    }
}

// ControllerëŠ” UseCase ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´
@RestController
@RequiredArgsConstructor
public class ComplexApi {
    private final ComplexUseCase complexUseCase;  // êµ¬í˜„ì´ ì•„ë‹Œ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´
}
```

### 2. AOPë¥¼ í†µí•œ ì¸ì¦ ì²˜ë¦¬

```java
@CheckLogin  // ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜
@GetMapping("/mypage")
public ApiResponse<MyPageResponse> getMyPage(
    @AuthenticationPrincipal PrincipalDetails principalDetails
) {
    UUID userId = principalDetails.getId();
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
}
```

**LoginCheckAspect**ê°€ `@CheckLogin` ë©”ì„œë“œ í˜¸ì¶œ ì „ì— ì¸ì¦ ì—¬ë¶€ë¥¼ ìë™ ê²€ì¦í•©ë‹ˆë‹¤.

### 3. ë‹¤ì¸µ ë°ì´í„°ë² ì´ìŠ¤ ì „ëµ

**MySQL** - ì •í˜• ë°ì´í„° (JPA)
```java
@Entity
@Table(name = "users")
public class User extends BaseTimeEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private UUID id;

    @OneToMany(mappedBy = "user")
    private List<Diagnosis> diagnoses;
}
```

**MongoDB** - ë¹„ì •í˜• ë°ì´í„°
```java
@Document(collection = "pinpoints")
public class PinPointDocument {
    @Id
    private String id;

    private Coordinate coordinate;  // Nested Document
    private List<String> tags;      // ìœ ì—°í•œ ìŠ¤í‚¤ë§ˆ
}
```

**Redis** - ì„¸ì…˜ ë° ìºì‹±
```java
@RedirectAttributes
public void saveRefreshToken(UUID userId, String refreshToken) {
    redisTemplate.opsForValue()
        .set("RT:" + userId, refreshToken, 7, TimeUnit.DAYS);
}
```

### 4. ë³µì¡í•œ ê·œì¹™ ì—”ì§„ êµ¬í˜„

**Chain of Responsibility íŒ¨í„´ì„ í™œìš©í•œ ì²­ì•½ ìê²© íŒë‹¨**

```java
public interface DiagnosisRule {
    boolean matches(RuleCriteria criteria);
    DiagnosisResult apply(UserInfo userInfo);
}

@Component
public class RuleChain {
    private final List<DiagnosisRule> rules;

    public DiagnosisResult diagnose(UserInfo userInfo, RuleCriteria criteria) {
        return rules.stream()
            .filter(rule -> rule.matches(criteria))
            .findFirst()
            .map(rule -> rule.apply(userInfo))
            .orElse(DiagnosisResult.notEligible());
    }
}
```

### 5. íš¨ìœ¨ì ì¸ í˜ì´ì§€ë„¤ì´ì…˜

**Cursor ê¸°ë°˜ ë¬´í•œ ìŠ¤í¬ë¡¤**
```java
public record SliceRequest(
    int page,
    int size
) {
    public Pageable toPageable() {
        return PageRequest.of(page, size + 1);  // N+1 ì¡°íšŒ
    }
}

public record SliceResponse<T>(
    List<T> content,
    boolean hasNext
) {
    public static <T> SliceResponse<T> from(Page<T> page) {
        boolean hasNext = page.getContent().size() > page.getSize();
        List<T> content = hasNext
            ? page.getContent().subList(0, page.getSize())
            : page.getContent();
        return new SliceResponse<>(content, hasNext);
    }
}
```

### 6. í‘œì¤€í™”ëœ API ì‘ë‹µ

```java
public record ApiResponse<T>(
    boolean success,
    T data,
    ErrorResponse error
) {
    public static <T> ApiResponse<T> ok(T data) {
        return new ApiResponse<>(true, data, null);
    }

    public static <T> ApiResponse<T> error(ErrorCode errorCode) {
        return new ApiResponse<>(false, null,
            new ErrorResponse(errorCode.getCode(), errorCode.getMessage()));
    }
}
```

### 7. ëŒ€ì¤‘êµí†µ ê²½ë¡œ ì •ë³´ ìµœì í™”

**TransitInfoResponse** - ì „ì²´ ê²½ë¡œ ì •ë³´ì™€ êµ¬ê°„ë³„ ì •ë³´ ë¶„ë¦¬
```java
public record TransitInfoResponse(
    String totalTime,              // "ì•½ 1ì‹œê°„ 23ë¶„"
    Integer totalTimeMinutes,      // 83
    Double totalDistance,          // 39.6 (km)
    List<SegmentResponse> segments // êµ¬ê°„ë³„ ìƒì„¸ ì •ë³´
) {}
```

ì´ë¥¼ í†µí•´ ì¤‘ë³µ ë°ì´í„°ë¥¼ ì œê±°í•˜ê³  API ì‘ë‹µ í¬ê¸°ë¥¼ ìµœì í™”í–ˆìŠµë‹ˆë‹¤.

---

## âš¡ï¸ ì„±ëŠ¥ ìµœì í™”

### 1. ë‹¤ì¸µ ë°ì´í„°ë² ì´ìŠ¤ ì „ëµ
- **MySQL**: ì •í˜•í™”ëœ íŠ¸ëœì­ì…˜ ë°ì´í„°
- **MongoDB**: ë³µì¡í•œ ê²€ìƒ‰ ì¿¼ë¦¬ ë° ìœ ì—°í•œ ìŠ¤í‚¤ë§ˆ
- **Redis**: ì„¸ì…˜ ìºì‹±ìœ¼ë¡œ DB ë¶€í•˜ ê°ì†Œ

### 2. ì»¤ì„œ ê¸°ë°˜ í˜ì´ì§€ë„¤ì´ì…˜
- Offset ë°©ì‹ ëŒ€ì‹  Cursor ê¸°ë°˜ ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„
- ëŒ€ëŸ‰ ë°ì´í„° ì¡°íšŒ ì‹œ ì„±ëŠ¥ ìµœì í™” (O(n) â†’ O(1))

### 3. DTO ìµœì í™”
- Java Record íƒ€ì…ìœ¼ë¡œ ë¶ˆë³€ ê°ì²´ ìƒì„±
- ì¤‘ë³µ ë°ì´í„° ì œê±° (TransitInfoResponse êµ¬ì¡° ê°œì„ )

### 4. N+1 ë¬¸ì œ í•´ê²°
- JPA Fetch Join ë° EntityGraph í™œìš©
- ì—°ê´€ ê´€ê³„ ë°ì´í„° í•œ ë²ˆì— ì¡°íšŒ

### 5. AOPë¥¼ í†µí•œ íš¡ë‹¨ ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- `@CheckLogin` ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì¸ì¦ ë¡œì§ ì¤‘ë³µ ì œê±°
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘ ê°€ëŠ¥

---

## ğŸ”’ ë³´ì•ˆ

### ì¸ì¦ ë° ì¸ê°€
- **JWT ê¸°ë°˜ ì¸ì¦**: Stateless ì¸ì¦ìœ¼ë¡œ í™•ì¥ì„± í™•ë³´
- **Refresh Token**: Redisì— ì €ì¥í•˜ì—¬ ë³´ì•ˆ ê°•í™”
- **OAuth2**: ì†Œì…œ ë¡œê·¸ì¸ìœ¼ë¡œ íŒ¨ìŠ¤ì›Œë“œ ê´€ë¦¬ ë¶€ë‹´ ì œê±°

### ë³´ì•ˆ ì„¤ì •
- **CORS ì„¤ì •**: í—ˆìš©ëœ ë„ë©”ì¸ë§Œ API ì ‘ê·¼ ê°€ëŠ¥
- **HTTPS**: Nginx + Certbotìœ¼ë¡œ SSL/TLS ì ìš©
- **SQL Injection ë°©ì§€**: JPA Prepared Statement ì‚¬ìš©

---

## ğŸ”„ CI/CD

### GitHub Actions Workflows

**1. CI Test (`ci-test.yml`)**
- **íŠ¸ë¦¬ê±°**: Pull Request to `develop`
- **ì‘ì—…**:
  - MySQL, Redis, MongoDB ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
  - `./gradlew clean build` ì‹¤í–‰ (í…ŒìŠ¤íŠ¸ í¬í•¨)
  - JUnit í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë°œí–‰

**2. Dev Deployment (`dev-ci-cd.yml`)**
- **íŠ¸ë¦¬ê±°**: Push to `develop`
- **ì‘ì—…**:
  - Docker ì´ë¯¸ì§€ ë¹Œë“œ
  - Dev ì„œë²„ ë°°í¬

### ê°œë°œ ì›Œí¬í”Œë¡œìš°

```
feature/* â†’ PR â†’ develop (CI Test) â†’ merge â†’ develop (Deploy to Dev)
```

---

## ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· (Screenshots)

> ğŸ“ **Note**: ì‹¤ì œ í”„ë¡œì íŠ¸ ìŠ¤í¬ë¦°ìƒ·ì„ ì¶”ê°€í•˜ë©´ í¬íŠ¸í´ë¦¬ì˜¤ íš¨ê³¼ê°€ ê·¹ëŒ€í™”ë©ë‹ˆë‹¤.
> - Swagger API ë¬¸ì„œ í™”ë©´
> - ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
> - ë°ì´í„°ë² ì´ìŠ¤ ERD ë‹¤ì´ì–´ê·¸ë¨
> - ì£¼ìš” ê¸°ëŠ¥ ë™ì‘ í™”ë©´

---

## ğŸ‘¥ ê°œë°œ íŒ€

**Backend Team**
- Spring Boot, Clean Architecture, Multi-Database Design
- OAuth2, JWT ì¸ì¦/ì¸ê°€ êµ¬í˜„
- ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„¤ê³„ (ì²­ì•½ ì§„ë‹¨ ê·œì¹™ ì—”ì§„)
- Odsay API ì—°ë™ ë° ëŒ€ì¤‘êµí†µ ê²½ë¡œ ìµœì í™”
- Kakao Local APIë¥¼ í™œìš©í•œ ì¢Œí‘œ ë³€í™˜ ì‹œìŠ¤í…œ

---

## ğŸ“„ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„¼ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤.

---

## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì§ˆë¬¸ì´ë‚˜ ì œì•ˆì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.

**Repository**: [PinHouse GitHub](https://github.com/PinHouse/PinHouse_BE)

---

<div align="center">

**Built with â¤ï¸ by PinHouse Team**

</div>
